# =============================================================================
# NEXUS PLATFORM ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and update with your actual values

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
APP_NAME=NEXUS Platform
APP_VERSION=0.1.0
DEBUG=False
ENVIRONMENT=development
API_V1_PREFIX=/api/v1

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# PostgreSQL connection string
DATABASE_URL=postgresql://nexus_user:nexus_password@localhost:5432/nexus_db
DB_ECHO=False
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20

# Test database (SQLite for testing)
TEST_DATABASE_URL=sqlite:///./test.db

# -----------------------------------------------------------------------------
# Security & Authentication
# -----------------------------------------------------------------------------
SECRET_KEY=your-super-secret-key-change-this-in-production-minimum-32-characters
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# Password requirements
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=True
PASSWORD_REQUIRE_LOWERCASE=True
PASSWORD_REQUIRE_NUMBERS=True
PASSWORD_REQUIRE_SPECIAL=True

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=
REDIS_DB=0
REDIS_CACHE_TTL=3600

# Session configuration
SESSION_REDIS_DB=1
SESSION_SECRET_KEY=your-session-secret-key-change-this

# -----------------------------------------------------------------------------
# Celery Configuration
# -----------------------------------------------------------------------------
CELERY_BROKER_URL=redis://localhost:6379/2
CELERY_RESULT_BACKEND=redis://localhost:6379/3
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json
CELERY_TIMEZONE=UTC
CELERY_ENABLE_UTC=True

# -----------------------------------------------------------------------------
# File Storage Configuration
# -----------------------------------------------------------------------------
# Storage backend: local, s3, azure, gcs
STORAGE_BACKEND=local
STORAGE_PATH=./storage
MAX_UPLOAD_SIZE=104857600  # 100MB in bytes
CHUNK_SIZE=5242880  # 5MB chunks for uploads

# Local storage
LOCAL_STORAGE_PATH=./storage

# AWS S3
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_S3_BUCKET_NAME=
AWS_S3_REGION=us-east-1
AWS_S3_ENDPOINT_URL=  # Optional: for S3-compatible services

# Azure Blob Storage
AZURE_STORAGE_CONNECTION_STRING=
AZURE_STORAGE_CONTAINER=

# Google Cloud Storage
GCS_BUCKET_NAME=
GCS_PROJECT_ID=
GCS_CREDENTIALS_PATH=./gcs-credentials.json

# -----------------------------------------------------------------------------
# AI/LLM Configuration
# -----------------------------------------------------------------------------
# Anthropic Claude
ANTHROPIC_API_KEY=your-anthropic-api-key
ANTHROPIC_MODEL=claude-3-5-sonnet-20241022
ANTHROPIC_MAX_TOKENS=4096
ANTHROPIC_TEMPERATURE=0.7

# OpenAI GPT
OPENAI_API_KEY=your-openai-api-key
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_MAX_TOKENS=4096
OPENAI_TEMPERATURE=0.7

# AI Features
AI_SUMMARIZATION_ENABLED=True
AI_CLASSIFICATION_ENABLED=True
AI_ENTITY_EXTRACTION_ENABLED=True
AI_CONTENT_RECOMMENDATIONS_ENABLED=True

# -----------------------------------------------------------------------------
# Search & Indexing
# -----------------------------------------------------------------------------
# Search backend: elasticsearch, postgresql, whoosh
SEARCH_BACKEND=postgresql

# Elasticsearch
ELASTICSEARCH_HOST=localhost
ELASTICSEARCH_PORT=9200
ELASTICSEARCH_USERNAME=
ELASTICSEARCH_PASSWORD=
ELASTICSEARCH_INDEX_PREFIX=nexus_

# Full-text search settings
SEARCH_MIN_QUERY_LENGTH=3
SEARCH_MAX_RESULTS=100
SEARCH_HIGHLIGHT_ENABLED=True

# -----------------------------------------------------------------------------
# Document Processing
# -----------------------------------------------------------------------------
# OCR Configuration
OCR_ENABLED=True
OCR_LANGUAGE=eng
TESSERACT_PATH=/usr/bin/tesseract

# Image processing
IMAGE_MAX_SIZE=4096
IMAGE_THUMBNAIL_SIZE=256
IMAGE_QUALITY=85
IMAGE_FORMAT=JPEG

# PDF processing
PDF_MAX_PAGES=1000
PDF_DPI=300

# Document conversion
LIBREOFFICE_PATH=/usr/bin/libreoffice
PANDOC_PATH=/usr/bin/pandoc
IMAGEMAGICK_PATH=/usr/bin/convert
FFMPEG_PATH=/usr/bin/ffmpeg

# -----------------------------------------------------------------------------
# Email Configuration
# -----------------------------------------------------------------------------
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=noreply@nexus-platform.com
SMTP_FROM_NAME=NEXUS Platform
SMTP_USE_TLS=True

# Email features
EMAIL_CAPTURE_ENABLED=True
EMAIL_NOTIFICATIONS_ENABLED=True

# -----------------------------------------------------------------------------
# Document Management Settings
# -----------------------------------------------------------------------------
# Version control
VERSION_CONTROL_ENABLED=True
VERSION_MAX_HISTORY=100
VERSION_AUTO_SAVE=True
VERSION_AUTO_SAVE_INTERVAL=300  # 5 minutes

# Document locking
LOCK_TIMEOUT=3600  # 1 hour
LOCK_AUTO_RELEASE=True

# Collaboration
REAL_TIME_COLLABORATION_ENABLED=True
WEBSOCKET_ENABLED=True
WEBSOCKET_HOST=localhost
WEBSOCKET_PORT=8001

# Permissions
DEFAULT_PERMISSION_INHERITANCE=True
DEFAULT_SHARE_EXPIRATION_DAYS=30

# Workflow
WORKFLOW_ENABLED=True
WORKFLOW_MAX_APPROVERS=10
WORKFLOW_TIMEOUT_DAYS=7

# Retention & Compliance
RETENTION_ENABLED=True
LEGAL_HOLD_ENABLED=True
AUDIT_LOG_RETENTION_DAYS=2555  # 7 years

# Classification
AUTO_CLASSIFICATION_ENABLED=True
CLASSIFICATION_CONFIDENCE_THRESHOLD=0.75

# Deduplication
DEDUPLICATION_ENABLED=True
DEDUPLICATION_HASH_ALGORITHM=sha256

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
BACKEND_CORS_ORIGINS=["http://localhost:8501", "http://localhost:3000"]
CORS_ALLOW_CREDENTIALS=True
CORS_ALLOW_METHODS=["*"]
CORS_ALLOW_HEADERS=["*"]

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
LOG_LEVEL=INFO
LOG_FORMAT=json  # json or text
LOG_FILE_PATH=./logs/nexus.log
LOG_FILE_MAX_SIZE=10485760  # 10MB
LOG_FILE_BACKUP_COUNT=5
LOG_TO_CONSOLE=True
LOG_TO_FILE=True

# Structured logging
STRUCTLOG_ENABLED=True

# -----------------------------------------------------------------------------
# Monitoring & Analytics
# -----------------------------------------------------------------------------
METRICS_ENABLED=True
ANALYTICS_ENABLED=True
PERFORMANCE_MONITORING_ENABLED=True

# Sentry (optional)
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# -----------------------------------------------------------------------------
# Frontend Configuration (Streamlit)
# -----------------------------------------------------------------------------
STREAMLIT_SERVER_PORT=8501
STREAMLIT_SERVER_ADDRESS=localhost
STREAMLIT_SERVER_HEADLESS=False
STREAMLIT_BROWSER_GATHER_USAGE_STATS=False
STREAMLIT_THEME_PRIMARY_COLOR=#FF4B4B
STREAMLIT_THEME_BACKGROUND_COLOR=#FFFFFF
STREAMLIT_THEME_SECONDARY_BACKGROUND_COLOR=#F0F2F6

# API backend URL (for Streamlit to connect to FastAPI)
BACKEND_API_URL=http://localhost:8000

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
RATE_LIMIT_ENABLED=True
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# Upload rate limiting
UPLOAD_RATE_LIMIT_MB_PER_HOUR=1000

# -----------------------------------------------------------------------------
# Testing Configuration
# -----------------------------------------------------------------------------
TESTING=False
TEST_DATA_PATH=./tests/fixtures

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
FEATURE_DOCUMENTS=True
FEATURE_SPREADSHEETS=True
FEATURE_PRESENTATIONS=True
FEATURE_PROJECTS=True
FEATURE_EMAIL=True
FEATURE_CHAT=True
FEATURE_FLOWCHARTS=True
FEATURE_ANALYTICS=True
FEATURE_MEETINGS=True
FEATURE_CALENDAR=True
FEATURE_TASKS=True
FEATURE_NOTES=True
FEATURE_WIKI=True
FEATURE_FORMS=True
FEATURE_SURVEYS=True
FEATURE_CRM=True
FEATURE_HRM=True
FEATURE_FINANCE=True
FEATURE_INVENTORY=True
FEATURE_REPORTS=True
FEATURE_DASHBOARDS=True
FEATURE_API=True
FEATURE_INTEGRATIONS=True
FEATURE_ADMIN=True

# -----------------------------------------------------------------------------
# Development Settings
# -----------------------------------------------------------------------------
DEV_MODE=True
AUTO_RELOAD=True
SWAGGER_UI_ENABLED=True
REDOC_ENABLED=True

# -----------------------------------------------------------------------------
# Production Settings
# -----------------------------------------------------------------------------
# Uncomment and configure for production
# DEBUG=False
# ENVIRONMENT=production
# DB_ECHO=False
# LOG_LEVEL=WARNING
# SWAGGER_UI_ENABLED=False
# DEV_MODE=False
# AUTO_RELOAD=False
